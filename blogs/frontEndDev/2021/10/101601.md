---
title: ESæ–°è¯­æ³•ç‰¹æ€§æ±‡æ€»
date: 2021-10-16
sidebar: auto
categories:
 - å‰ç«¯
tags:
 - ESx
---

## ç±»ä¼¼é—­åŒ…æ–¹å¼å®ç°æ•°ç»„å¾ªç¯ä¸­æ‰§è¡ŒAjaxâœ¨

```javascript
	var x = 0;
    var fileNameArr = Object.values(data);
    for (var value of fileNameArr)
    {
        (function (value){
           setTimeout(function (){
               downFile(value);
           },x*1500);
        })(value);
        x++;
    }
```

##  Object.assignå¯¹è±¡ä¸€äº›æ“ä½œğŸ§¨

```javascript
// Object.assignæ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰
// Object.assignæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚
Object.assign(menuEntity,data.field);

// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼ŒObject.assignä¼šç›´æ¥è¿”å›è¯¥å‚æ•°ã€‚

var obj = {a: 1};

Object.assign(obj) === obj // true

// å¦‚æœè¯¥å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šå…ˆè½¬æˆå¯¹è±¡ï¼Œç„¶åè¿”å›ã€‚

typeof Object.assign(2) // "object"

// ç”±äºundefinedå’Œnullæ— æ³•è½¬æˆå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœå®ƒä»¬ä½œä¸ºå‚æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚

Object.assign(undefined) //Â  æŠ¥é”™

Object.assign(null) //Â  æŠ¥é”™


//2ã€åˆå¹¶å¤šä¸ªå¯¹è±¡:å°†å¤šä¸ªå¯¹è±¡åˆå¹¶åˆ°æŸä¸ªå¯¹è±¡ã€‚

const merge = (target, ...sources) => Object.assign(target, ...sources);

// å¦‚æœå¸Œæœ›åˆå¹¶åè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¯ä»¥æ”¹å†™ä¸Šé¢å‡½æ•°ï¼Œå¯¹ä¸€ä¸ªç©ºå¯¹è±¡åˆå¹¶

//3ã€ä¸ºå±æ€§æŒ‡å®šé»˜è®¤å€¼

const DEFAULTS = 
{
	logLevel: 0,
Â 	outputFormat: 'html'
};

function processContent(options)
{
	let options = Object.assign({}, DEFAULTS, options);
}

// ä¸Šé¢ä»£ç ä¸­ï¼ŒDEFAULTSå¯¹è±¡æ˜¯é»˜è®¤å€¼ï¼Œoptionså¯¹è±¡æ˜¯ç”¨æˆ·æä¾›çš„å‚æ•°ã€‚Object.assignæ–¹æ³•å°†DEFAULTSå’Œoptionsåˆå¹¶æˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¦‚æœä¸¤è€…æœ‰åŒåå±æ€§ï¼Œåˆ™optionçš„å±æ€§å€¼ä¼šè¦†ç›–DEFAULTSçš„å±æ€§å€¼ã€‚

// æ³¨æ„ï¼Œç”±äºå­˜åœ¨æ·±æ‹·è´çš„é—®é¢˜ï¼ŒDEFAULTSå¯¹è±¡å’Œoptionså¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„å€¼ï¼Œéƒ½åªèƒ½æ˜¯ç®€å•ç±»å‹ï¼Œè€Œä¸èƒ½æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚å¦åˆ™ï¼Œå°†å¯¼è‡´DEFAULTSå¯¹è±¡çš„è¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚

```

## ES9ğŸ˜

### å¼‚æ­¥è¿­ä»£

```javascript
// wait å¯ä»¥å’Œ for of å¾ªç¯ä¸€èµ·ä½¿ç”¨ï¼Œè¿è¡Œå¼‚æ­¥æ“ä½œ
async function getCg (cgIdArr){
    for await (let cgId of cgIdArr)
    {
        // ajax
    }
}
```
### Promise.finally()

```javascript
  Promise.resolve().then().catch(e => e).finally();
```

## ES10ğŸ’¨

#### Array.flat(deep)

```javascript
  å‚æ•°å†³å®šäº†å¯ä»¥æ‰å¹³åŒ–åˆ°å“ªä¸€ä¸ªå±‚çº§ï¼Œæ²¡æœ‰å‚æ•°çš„æ—¶å€™é»˜è®¤ä¸º 1ï¼Œè¿”å›æ–°çš„æ•°ç»„ï¼Œå¯¹åŸæ•°ç»„ä¸äº§ç”Ÿå½±å“
  [1, 2, [[3, 4]]].flat(1); // [1, 2, [3, 4]]
  [1, 2, [[3, 4]]].flat(2); // [1, 2, 3, 4]
  // æ— è®ºåµŒå¥—å¤šæ·±ï¼Œéƒ½ä¼šå˜æˆä¸€ç»´æ•°ç»„
  [1, 2, [[3, 4]]].flat(Infinity); // [1, 2, 3, 4]
  // åˆ é™¤æ•°ç»„ä¸­çš„ç©ºå€¼
  [1, , 2, 3].flat() // [1, 2, 3]

```

#### Array.flatMap()

```javascript
  åŒºåˆ«ï¼š
  [1, 2, 3, 4].flatMap(a => [a*2]); // [2, 4, 6, 8]
  [1, 2, 3, 4].map(a => [a*2]); // [[2], [4], [6], [8]]

```

#### String.trimStart() å’Œ String.trimEnd()

**å»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºç™½å­—ç¬¦**

#### Object.fromEntries()

```javascript
è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„
// é€šè¿‡ Object.fromEntriesï¼Œ å°† Map è½¬ä¸º Object:
const map = new Map([ ['a', 1], ['b', 2] ]);
console.log(Object.fromEntries(map)); // { a: 1, b: 2 }

```

## ES11ğŸ‘‰

#### ?? ç©ºå€¼å¤„ç†

```javascript
  ?? å·¦ä¾§çš„å€¼å¿…é¡»æ˜¯ undefined æˆ–è€… null çš„æ—¶å€™ï¼Œæ‰ä¼šè¿”å›è¿”å³ä¾§çš„å€¼ï¼Œå¦åˆ™è¿”å›å·¦ä¾§çš„å€¼ã€‚
  let breeze = {
    a: 0,
    b: false,
    c: null,
    d: undefined,
    e: 'ceshi',
  }
  let a = breeze.a ?? '1' // 0
  let b = breeze.b ?? '2' // false
  let c = breeze.c ?? '3' // 3
  let d = breeze.d ?? '4' // 4
  let e = breeze.e ?? '5' // 'ceshi'

```

#### ?. å¯é€‰é“¾ åˆ¤æ–­æ˜¯å¦å­˜åœ¨

```javascript
  ?. åˆ¤æ–­ä¸ç¡®å®šçš„ä¸­é—´èŠ‚ç‚¹ï¼Œä»£æ›¿ && èŠ‚çœä»£ç ç©ºé—´
  let breeze = {}
  let name = breeze.people.name // TypeError: Cannot read property 'name' of undefined
  let color = breeze.people?.color // undefined

```

#### åŸºæœ¬æ•°æ®ç±»å‹ BigInt

```
BigInt(value)
å¯ä»¥è¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°
ä»»æ„ç²¾åº¦çš„æ•´æ•°
```

## é“¾å¼è°ƒç”¨ğŸ¥¨

```javascript
class Obj{

	a(){
	console.log("æ–¹æ³•1");
	return this;
	}
	b(){
	console.log("æ–¹æ³•2");
	return this;
	}
}

(new Obj).a().a().b().b();
```

