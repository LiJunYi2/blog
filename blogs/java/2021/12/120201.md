---
title: Springæ³¨å…¥Beançš„å‡ ç§æ–¹å¼
date: 2021-12-02
sidebar: auto
categories:
 - java
tags:
 - Spring
---

## Springæ³¨å…¥Beançš„å‡ ç§æ–¹å¼ğŸ§¨

### 1ã€åŸºäº field æ³¨å…¥ï¼ˆ@Autowiredæ³¨è§£ï¼‰ğŸ˜‘

```java
@Autowired
IPersonnelService personnelService;
```
### 2ã€æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæ¨èï¼‰ğŸ‘Œ

```java
@Service
@Transactional(rollbackFor = Exception.class)
public class PersonnelServiceImpl extends ServiceImpl<PersonnelDao, PersonnelModel> implements IPersonnelService
{
    private final PersonnelDao personnelDao;
    
    /**
     * æ„é€ å‡½æ•°æ³¨å…¥
     */
    public PersonnelServiceImpl(PersonnelDao personnelDao) {
        this.personnelDao = personnelDao;
    }
}
```

### 3ã€setteræ–¹æ³•æ³¨å…¥ğŸ‰

```java
@Component
@Slf4j
public class TaskJob
{
    private IPersonnelService personnelService;

    @Autowired
    public void setPersonnelService(IPersonnelService personnelService)
    {
        this.personnelService = personnelService;
    }

    /**
     * æ£€æµ‹åˆåŒæ˜¯å¦å¿«åˆ°æœŸä»»åŠ¡
     */
    @Scheduled(cron = "0 28 14 * * ? ")
    public void contractNoticeJob()
    {
        log.info("---- æ£€æµ‹åˆåŒæ˜¯å¦å¿«åˆ°æœŸä»»åŠ¡ START ----");
        personnelService.getContractNoticeJob();
    }

}
```

### 4ã€è‡ªå®šä¹‰çš„å·¥å…·ç±»ä¸­å¦‚ä½•æ³¨å…¥BeanğŸŒ‹

**åœºæ™¯ï¼š**

    æˆ‘ä»¬è¦åœ¨æˆ‘ä»¬è‡ªå·±å°è£…çš„Utilså·¥å…·ç±»ä¸­æˆ–è€…écontrolleræ™®é€šç±»ä¸­ä½¿ç”¨@Autowiredæ³¨è§£æ³¨å…¥Serviceæˆ–è€…Mapperæ¥å£ï¼Œç›´æ¥æ³¨å…¥æ˜¯æŠ¥é”™çš„

**åŸå› ï¼š**

    å› ä¸ºUtilsä½¿ç”¨äº†é™æ€çš„æ–¹æ³•ï¼Œé™æ€å˜é‡ï¼Œé™æ€æ–¹æ³•ä¸æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå±äºclassçš„ï¼›æ™®é€šæ–¹æ³•æ‰æ˜¯å±äºå¯¹è±¡
    springæ³¨å…¥æ˜¯åœ¨å®¹å™¨ä¸­å®ä¾‹åŒ–å¯¹è±¡ï¼Œé™æ€ç±»ï¼Œæ–¹æ³•çš„åŠ è½½ä¼˜äº@Autowiredçš„åŠ è½½

    Javaå˜é‡çš„åˆå§‹åŒ–é¡ºåºä¸ºï¼šé™æ€å˜é‡æˆ–é™æ€è¯­å¥å—â€“>å®ä¾‹å˜é‡æˆ–åˆå§‹åŒ–è¯­å¥å—â€“>æ„é€ æ–¹æ³•â€“>@Autowired> @PostConstruct

**è§£å†³æ–¹æ¡ˆ**âœŒï¸

```java
// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨@PostConstructæ³¨è§£

@Component   
public class TestUtils {  

	@Autowired  
	private ItemService itemService;  
	
	private static TestUtils testUtils;  

	@PostConstruct
	public void init() {      
    	testUtils = this;
	}   
  
	public static void test()
    {
    	testUtils.itemService.insert();  
    	
	}
}
```

```java
// è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨setteræ³¨å…¥

@Component
public class TestUtils
{
    private static StringRedisTemplate redisTemplate;

    @Autowired
    public void setRedisTemplate(StringRedisTemplate redisTemplate) {
        RedisHelper.redisTemplate = redisTemplate;
    }
}

```

## Springå¼€å‘å›¢é˜Ÿçš„å»ºè®®ğŸ™Œ

    Since you can mix constructor-based and setter-based DI, it is a good rule of thumb to use constructors for 
    mandatory dependencies and setter methods or configuration methods for optional dependencies.

**ç®€å•æ¥è¯´ï¼Œå°±æ˜¯**

    - å¼ºåˆ¶ä¾èµ–å°±ç”¨æ„é€ å™¨æ–¹å¼

    - å¯é€‰ã€å¯å˜çš„ä¾èµ–å°±ç”¨ setter æ³¨å…¥å½“ç„¶ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªç±»ä¸­ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•ã€‚æ„é€ å™¨æ³¨å…¥æ›´é€‚åˆå¼ºåˆ¶æ€§çš„æ³¨å…¥æ—¨åœ¨ä¸å˜æ€§ï¼ŒSetter æ³¨å…¥æ›´é€‚åˆå¯å˜æ€§çš„æ³¨å…¥ã€‚

## é‚£ä¹ˆä½¿ç”¨@Autowiredæ³¨è§£ï¼ˆåŸºäºfieldæ³¨å…¥çš„åå¤„ï¼‰æœ‰å“ªäº›ï¼Ÿ

**åŸºäº field æ³¨å…¥è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å´ä¼šå¼•å‘å¾ˆå¤šçš„é—®é¢˜ã€‚è¿™äº›é—®é¢˜åœ¨æˆ‘å¹³å¸¸å¼€å‘é˜…è¯»é¡¹ç›®ä»£ç çš„æ—¶å€™å°±ç»å¸¸é‡è§ã€‚**

- **å®¹æ˜“è¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™ ä½¿ç”¨è¿™ç§åŸºäº field æ³¨å…¥çš„æ–¹å¼ï¼Œæ·»åŠ ä¾èµ–æ˜¯å¾ˆç®€å•çš„ï¼Œå°±ç®—ä½ çš„ç±»ä¸­æœ‰åå‡ ä¸ªä¾èµ–ä½ å¯èƒ½éƒ½è§‰å¾—æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ™®é€šçš„å¼€å‘è€…å¾ˆå¯èƒ½ä¼šæ— æ„è¯†åœ°ç»™ä¸€ä¸ªç±»æ·»åŠ å¾ˆå¤šçš„ä¾èµ–ã€‚ä½†æ˜¯å½“ä½¿ç”¨æ„é€ å™¨æ–¹å¼æ³¨å…¥ï¼Œåˆ°äº†æŸä¸ªç‰¹å®šçš„ç‚¹ï¼Œæ„é€ å™¨ä¸­çš„å‚æ•°å˜å¾—å¤ªå¤šä»¥è‡³äºå¾ˆæ˜æ˜¾åœ°å‘ç° something is wrongã€‚æ‹¥æœ‰å¤ªå¤šçš„ä¾èµ–é€šå¸¸æ„å‘³ç€ä½ çš„ç±»è¦æ‰¿æ‹…æ›´å¤šçš„è´£ä»»ï¼Œæ˜æ˜¾è¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼šSingle responsibility principleï¼‰ã€‚**

- **ä¾èµ–æ³¨å…¥ä¸å®¹å™¨æœ¬èº«è€¦åˆä¾èµ–æ³¨å…¥æ¡†æ¶çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€å°±æ˜¯å—å®¹å™¨ç®¡ç†çš„ç±»ä¸åº”è¯¥å»ä¾èµ–å®¹å™¨æ‰€ä½¿ç”¨çš„ä¾èµ–ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªç±»åº”è¯¥æ˜¯ä¸€ä¸ªç®€å•çš„POJO(Plain Ordinary Java Object)èƒ½å¤Ÿè¢«å•ç‹¬å®ä¾‹åŒ–å¹¶ä¸”ä½ ä¹Ÿèƒ½ä¸ºå®ƒæä¾›å®ƒæ‰€éœ€çš„ä¾èµ–ã€‚**

- **è¿™ä¸ªé—®é¢˜å…·ä½“å¯ä»¥è¡¨ç°åœ¨ï¼š**

- - **ä½ çš„ç±»ä¸èƒ½ç»•è¿‡åå°„ï¼ˆä¾‹å¦‚å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼‰è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¿…é¡»é€šè¿‡ä¾èµ–å®¹å™¨æ‰èƒ½å®ä¾‹åŒ–ï¼Œè¿™æ›´åƒæ˜¯é›†æˆæµ‹è¯•**
  - **ä½ çš„ç±»å’Œä¾èµ–å®¹å™¨å¼ºè€¦åˆï¼Œä¸èƒ½åœ¨å®¹å™¨å¤–ä½¿ç”¨**

- - **ä¸èƒ½ä½¿ç”¨å±æ€§æ³¨å…¥çš„æ–¹å¼æ„å»ºä¸å¯å˜å¯¹è±¡(final ä¿®é¥°çš„å˜é‡)**
