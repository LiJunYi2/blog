(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{563:function(s,a,n){"use strict";n.r(a);var t=n(4),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"binlogæ¢å¤è¯¯åˆ æ•°æ®âœ¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#binlogæ¢å¤è¯¯åˆ æ•°æ®âœ¨"}},[s._v("#")]),s._v(" binlogæ¢å¤è¯¯åˆ æ•°æ®âœ¨")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[s._v("MySQL ä¸­çš„æ—¥å¿—æ¯”è¾ƒé‡è¦çš„æœ‰ binlogï¼ˆå½’æ¡£æ—¥å¿—ï¼‰ã€redo logï¼ˆé‡åšæ—¥å¿—ï¼‰ä»¥åŠ undo log")])]),n("h3",{attrs:{id:"_1ã€è¯¦ç»†æ¦‚è¿°ğŸ‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€è¯¦ç»†æ¦‚è¿°ğŸ‡"}},[s._v("#")]),s._v(" 1ã€è¯¦ç»†æ¦‚è¿°ğŸ‡")]),s._v(" "),n("p",[n("strong",[s._v("binlog æ˜¯ MySQL Server å±‚çš„æ—¥å¿—ï¼Œè€Œä¸æ˜¯å­˜å‚¨å¼•æ“è‡ªå¸¦çš„æ—¥å¿—ï¼Œå®ƒè®°å½•äº†æ‰€æœ‰çš„ DDL å’Œ DML(ä¸åŒ…å«æ•°æ®æŸ¥è¯¢è¯­å¥)è¯­å¥ï¼Œè€Œä¸”æ˜¯ä»¥äº‹ä»¶å½¢å¼è®°å½•ï¼Œè¿˜åŒ…å«è¯­å¥æ‰€æ‰§è¡Œçš„æ¶ˆè€—çš„æ—¶é—´ç­‰")])]),s._v(" "),n("div",{staticClass:"custom-block theorem"},[n("p",{staticClass:"title"},[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼š")]),n("p",[s._v("1ã€binlog æ˜¯ä¸€ç§é€»è¾‘æ—¥å¿—ï¼Œä»–é‡Œè¾¹æ‰€è®°å½•çš„æ˜¯ä¸€æ¡ SQL è¯­å¥çš„åŸå§‹é€»è¾‘ï¼Œä¾‹å¦‚ç»™æŸä¸€ä¸ªå­—æ®µ +1ï¼Œæ³¨æ„è¿™ä¸ªåŒºåˆ«äº redo log çš„ç‰©ç†æ—¥å¿—ï¼ˆåœ¨æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹ï¼‰")]),s._v(" "),n("p",[s._v("2ã€binlog æ–‡ä»¶å†™æ»¡åï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ç»§ç»­å†™ï¼Œè€Œä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ï¼Œè¿™ä¸ªä¹ŸåŒºåˆ«äº redo logï¼Œredo log æ˜¯å¾ªç¯å†™å…¥çš„ï¼Œå³åé¢å†™å…¥çš„å¯èƒ½ä¼šè¦†ç›–å‰é¢å†™å…¥çš„")]),s._v(" "),n("p",[s._v("3ã€ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨é…ç½® binlog çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®š binlog æ–‡ä»¶çš„æœ‰æ•ˆæœŸï¼Œè¿™æ ·åœ¨åˆ°æœŸåï¼Œæ—¥å¿—æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œè¿™æ ·é¿å…å ç”¨è¾ƒå¤šå­˜å‚¨ç©ºé—´")]),s._v(" "),n("div",{staticClass:"custom-block right"})]),n("p",[n("strong",[s._v("æ ¹æ® MySQL å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œå¼€å¯ binlog ä¹‹åï¼Œå¤§æ¦‚ä¼šæœ‰ 1% çš„æ€§èƒ½æŸè€—ï¼Œä¸è¿‡è¿™è¿˜æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œbinlog æœ‰ä¸¤ä¸ªé‡è¦çš„ä½¿ç”¨åœºæ™¯ï¼š")])]),s._v(" "),n("ul",[n("li",[s._v("MySQL ä¸»ä»å¤åˆ¶æ—¶ï¼šåœ¨ä¸»æœºä¸Šå¼€å¯ binlogï¼Œä¸»æœºå°† binlog åŒæ­¥ç»™ä»æœºï¼Œä»æœºé€šè¿‡ binlog æ¥åŒæ­¥æ•°æ®ï¼Œè¿›è€Œå®ç°ä¸»æœºå’Œä»æœºçš„æ•°æ®åŒæ­¥ã€‚")]),s._v(" "),n("li",[s._v("MySQL æ•°æ®æ¢å¤ï¼Œé€šè¿‡ä½¿ç”¨ mysqlbinlog å·¥å…·å†ç»“åˆ binlog æ–‡ä»¶ï¼Œå¯ä»¥å°†æ•°æ®æ¢å¤åˆ°è¿‡å»çš„æŸä¸€æ—¶åˆ»ã€‚")])]),s._v(" "),n("h3",{attrs:{id:"_2ã€å¼€å¯binlogğŸŒ‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€å¼€å¯binlogğŸŒ‹"}},[s._v("#")]),s._v(" 2ã€å¼€å¯binlogğŸŒ‹")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ç™»å½•mysqlæŸ¥çœ‹binlogæ—¥å¿—çš„çŠ¶æ€ï¼Œoffä¸ºå…³é—­çŠ¶æ€")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VARIABLES "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'log_bin%'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("å¼€å¯ binlog : vim /etc/my.cnf")]),s._v("ğŸ›»")]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[s._v("# å¼€å¯ï¼Œå¹¶ä¸”å¯ä»¥å°†mysql-binæ”¹ä¸ºå…¶å®ƒçš„æ—¥å¿—å\n# log-bin=mysql-bin\nlog-bin=my-bin\n\n# è¶…è¿‡200Må°†ç”Ÿäº§æ–°çš„æ–‡ä»¶ï¼Œæœ€å¤§å’Œé»˜è®¤å€¼æ˜¯1GB\n# è®¾ç½®æœ€å¤§ 100MB\nmax_binlog_size=104857600\n\n# è®¾ç½®äº† binlog æ–‡ä»¶çš„æœ‰æ•ˆæœŸï¼ˆå•ä½ï¼šå¤©ï¼‰\nexpire_logs_days = 7\n\n# æ­¤å‚æ•°é…ç½®binlogçš„æ—¥å¿—æ ¼å¼ï¼Œé»˜è®¤ä¸ºmixedã€‚\nbinlog_format=mixed\n\n# binlog æ—¥å¿—åªè®°å½•æŒ‡å®šåº“çš„æ›´æ–°ï¼ˆé…ç½®ä¸»ä»å¤åˆ¶çš„æ—¶å€™ä¼šç”¨åˆ°ï¼‰\n#binlog-do-db=my_db\n\n# binlog æ—¥å¿—ä¸è®°å½•æŒ‡å®šåº“çš„æ›´æ–°ï¼ˆé…ç½®ä¸»ä»å¤åˆ¶çš„æ—¶å€™ä¼šç”¨åˆ°ï¼‰\n#binlog-ignore-db=my_no_db\n\n# å†™ç¼“å­˜å¤šå°‘æ¬¡ï¼Œåˆ·ä¸€æ¬¡ç£ç›˜ï¼Œé»˜è®¤ 0 è¡¨ç¤ºè¿™ä¸ªæ“ä½œç”±æ“ä½œç³»ç»Ÿæ ¹æ®è‡ªèº«è´Ÿè½½è‡ªè¡Œå†³å®šå¤šä¹…å†™ä¸€æ¬¡ç£ç›˜\n# 1 è¡¨ç¤ºæ¯ä¸€æ¡äº‹åŠ¡æäº¤éƒ½ä¼šç«‹å³å†™ç£ç›˜ï¼Œn åˆ™è¡¨ç¤º n ä¸ªäº‹åŠ¡æäº¤æ‰ä¼šå†™ç£ç›˜\nsync_binlog=0\n\n# æ·»åŠ idå·ï¼Œå¦‚æœåšä¸»ä»ï¼Œå°±ä¸èƒ½ä¸€æ ·\nserver-id=1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("é…ç½®å®Œæˆåï¼Œé‡å¯ mysql ï¼Œé‡å¯ä¹‹åï¼Œå†æ¬¡æ‰§è¡Œ show variables like 'log_bin%'; å³å¯çœ‹åˆ° binlog å·²ç»å¼€å¯äº†ã€‚")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" variables "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'log_bin%'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------------------------------+-------------------------------------------------------------+")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Variable_name                   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Value")]),s._v("                                                       "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------------------------------+-------------------------------------------------------------+")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log_bin                         "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v("                                                          "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log_bin_basename                "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" G:\\java\\"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),s._v("\\MySQL Server "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("\\"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Data")]),s._v("\\LAPTOP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("RDCIFBH0"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin       "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log_bin_index                   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" G:\\java\\"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),s._v("\\MySQL Server "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("\\"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Data")]),s._v("\\LAPTOP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("RDCIFBH0"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log_bin_trust_function_creators "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                                                         "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" log_bin_use_v1_row_events       "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFF")]),s._v("                                                         "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------------------------------+-------------------------------------------------------------+")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("ul",[n("li",[s._v("log_bin_basenameï¼šè¿™ä¸ªæ˜¯å°†æ¥äº§ç”Ÿçš„ binlog æ—¥å¿—æ–‡ä»¶çš„åç§°å‰ç¼€ï¼Œæ¢å¥è¯è¯´ï¼Œæ ¹æ®å¤§å®¶ç›®å‰æ‰€çœ‹åˆ°çš„é…ç½®ï¼Œå°†æ¥äº§ç”Ÿçš„ binlog æ—¥å¿—æ–‡ä»¶åä¸º my-bin.xxxï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å°†ä¼šç”¨æ¥è®°å½•æ‰€æœ‰çš„ DDL å’Œ DML è¯­å¥äº‹ä»¶ã€‚")]),s._v(" "),n("li",[s._v("log_bin_indexï¼šè¿™ä¸ªæ˜¯ binlog çš„ç´¢å¼•æ–‡ä»¶ï¼Œä¿å­˜äº†æ‰€æœ‰ binlog çš„ç›®å½•ï¼Œå› ä¸º binlog å¯èƒ½ä¼šæœ‰å¤šä¸ªã€‚")])]),s._v(" "),n("h3",{attrs:{id:"_3-å¸¸è§-binlog-æ“ä½œğŸ‘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¸¸è§-binlog-æ“ä½œğŸ‘"}},[s._v("#")]),s._v(" 3. å¸¸è§ binlog æ“ä½œğŸ‘")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹æ‰€æœ‰binlogæ—¥å¿—åˆ—è¡¨")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" master logs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹masterçŠ¶æ€ï¼Œå³æœ€å(æœ€æ–°)ä¸€ä¸ªbinlogæ—¥å¿—çš„ç¼–å·åç§°ï¼ŒåŠå…¶æœ€åä¸€ä¸ªæ“ä½œäº‹ä»¶posç»“æŸç‚¹(Position)å€¼")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" master "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åˆ·æ–° binlog:æ­£å¸¸æ¥è¯´ï¼Œä¸€ä¸ª binlog å†™æ»¡ä¹‹åï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª binlog å¼€å§‹å†™ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œä¸€ä¸ª flush logs å‘½ä»¤æ¥æ‰‹åŠ¨åˆ·æ–° binlog;")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æ‰‹åŠ¨åˆ·æ–° binlog ä¹‹åï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ binlog æ—¥å¿—æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æ‰€æœ‰çš„ binlog æ—¥å¿—éƒ½å°†è®°å½•åˆ°æ–°çš„æ–‡ä»¶ä¸­ã€‚")]),s._v("\nflush logs\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- é‡ç½® binlog")]),s._v("\nreset master\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥çœ‹ binlog")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¸ºäº†æŸ¥çœ‹ binlogï¼ŒMySQL ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªå®˜æ–¹å·¥å…·ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ï¼Œé¦–å…ˆæ˜¯ mysqlbinlog å‘½ä»¤")]),s._v("\nmysqlbinlog "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("00001")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æ–¹æ³•2ï¼šè¿™ä¸ªè¡¨ç¤ºä»¥äº‹ä»¶çš„æ–¹å¼æ¥æŸ¥çœ‹ binlog")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" binlog events "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'log_name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" pos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("offset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" row_count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- log_nameï¼šå¯ä»¥æŒ‡å®šè¦æŸ¥çœ‹çš„ binlog æ—¥å¿—æ–‡ä»¶åï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œè¡¨ç¤ºæŸ¥çœ‹æœ€æ—©çš„ binlog æ–‡ä»¶ã€‚")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- posï¼šä»å“ªä¸ª pos ç‚¹å¼€å§‹æŸ¥çœ‹ï¼Œå‡¡æ˜¯ binlog è®°å½•ä¸‹æ¥çš„æ“ä½œéƒ½æœ‰ä¸€ä¸ª pos ç‚¹ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯ç›¸å½“äºæˆ‘ä»¬å¯ä»¥æŒ‡å®šä»å“ªä¸ªæ“ä½œå¼€å§‹æŸ¥çœ‹æ—¥å¿—ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œå°±æ˜¯ä»è¯¥ binlog çš„å¼€å¤´å¼€å§‹æŸ¥çœ‹ã€‚")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- offsetï¼šè¿™æ˜¯æ˜¯åç§»é‡ï¼Œä¸æŒ‡å®šé»˜è®¤å°±æ˜¯ 0ã€‚")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- row_countï¼šæŸ¥çœ‹å¤šå°‘è¡Œè®°å½•ï¼Œä¸æŒ‡å®šå°±æ˜¯æŸ¥çœ‹æ‰€æœ‰ã€‚")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"_4ã€ä½¿ç”¨binlogæ¢å¤æ•°æ®ğŸ§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€ä½¿ç”¨binlogæ¢å¤æ•°æ®ğŸ§"}},[s._v("#")]),s._v(" 4ã€ä½¿ç”¨binlogæ¢å¤æ•°æ®ğŸ§")]),s._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"title"},[s._v("æ³¨æ„ç‚¹ï¼š")]),n("p",[s._v("æ¢å¤çš„æ—¶å€™è¦é…åˆå…¨å¤‡ä»½ï¼Œå…ˆè¿›è¡Œå…¨å¤‡ä»½ï¼Œåœ¨ç”¨ mysqldump å…¨å¤‡æ—¶æ·»åŠ -Fåˆ·æ–°binlogï¼Œè¿™æ—¶å€™mysqldumpå¤‡ä»½çš„æ˜¯æœ€æ–°çš„binlogæ—¥å¿—ä¹‹å‰çš„å†…å®¹äº†ã€‚")]),s._v(" "),n("p",[s._v("å…ˆè¿›è¡Œå…¨å¤‡ä»½æ¢å¤ï¼Œå†å°†æœ€æ–°çš„binlogæ–‡ä»¶ç”¨mysqlbinlogè¿›è¡ŒæŸ¥çœ‹ï¼Œgrepæˆ–è€…å…¶ä»–æ–¹å¼è¿‡æ»¤ï¼Œæ‰¾åˆ°æœ‰é—®é¢˜çš„sqlè¯­å¥ï¼Œè®°å½•ä¸‹å½“æ—¶çš„posç‚¹æˆ–è€…æ—¶é—´ã€‚åªæ¢å¤å‡ºé—®é¢˜ä¹‹å‰å¾—æ—¶é—´ç‚¹å³å¯ã€‚")])]),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("mysqldump "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--flush-logs --lock-tables -B mydb>/root/my.bak.sql")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- --flush-logsï¼šè¿™ä¸ªè¡¨ç¤ºåœ¨å¯¼å‡ºä¹‹å‰å…ˆåˆ·æ–° binlogï¼Œåˆ·æ–° binlog ä¹‹åå°†ä¼šäº§ç”Ÿæ–°çš„ binlog æ–‡ä»¶ï¼Œåç»­çš„æ“ä½œéƒ½å­˜åœ¨æ–°çš„ binlog ä¸­ã€‚")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- --lock-tablesï¼šè¿™ä¸ªè¡¨ç¤ºå¼€å§‹å¯¼å‡ºå‰ï¼Œé”å®šæ‰€æœ‰è¡¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å½“å¯¼å‡ºå¤šä¸ªæ•°æ®åº“æ—¶ï¼Œlock-tables åˆ†åˆ«ä¸ºæ¯ä¸ªæ•°æ®åº“é”å®šè¡¨")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å› æ­¤è¿™ä¸ªé€‰é¡¹ä¸èƒ½ä¿è¯å¯¼å‡ºæ–‡ä»¶ä¸­çš„è¡¨åœ¨æ•°æ®åº“ä¹‹é—´çš„é€»è¾‘ä¸€è‡´æ€§ï¼Œä¸åŒæ•°æ®åº“è¡¨çš„å¯¼å‡ºçŠ¶æ€å¯ä»¥å®Œå…¨ä¸åŒã€‚")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- -Bï¼šè¿™ä¸ªè¡¨ç¤ºæŒ‡å®šå¯¼å‡ºçš„æ•°æ®åº“åç§°ï¼Œå¦‚æœä½¿ç”¨ `--all-databases` æˆ–è€… `-A` ä»£æ›¿ `-B` è¡¨ç¤ºå¯¼å‡ºæ‰€æœ‰çš„æ•°æ®åº“ã€‚")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("strong",[s._v("é€šè¿‡binlogè¿˜åŸæ•°æ®åº“")])]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("mysqlbinlog "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("000002")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--stop-position=764 --database=mydb | mysql -uroot -p")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"custom-block theorem"},[n("p",{staticClass:"title"},[s._v("å¸¸ç”¨å‚æ•°é€‰é¡¹è§£é‡Šï¼š")]),n("p",[s._v("--start-position= 875 èµ·å§‹posç‚¹")]),s._v(" "),n("p",[s._v("--stop-position= 954 ç»“æŸposç‚¹")]),s._v(" "),n("p",[s._v('--start-datetime="2016-9-25 22:01:08" èµ·å§‹æ—¶é—´ç‚¹')]),s._v(" "),n("p",[s._v('--stop-datetime="2019-9-25 22:09:46" ç»“æŸæ—¶é—´ç‚¹')]),s._v(" "),n("p",[s._v("--database=mydb æŒ‡å®šåªæ¢å¤mydbæ•°æ®åº“(ä¸€å°ä¸»æœºä¸Šå¾€å¾€æœ‰å¤šä¸ªæ•°æ®åº“ï¼Œåªé™æœ¬åœ°logæ—¥å¿—)")])])])}),[],!1,null,null,null);a.default=e.exports}}]);